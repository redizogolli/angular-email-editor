const scriptUrl = '//editor.unlayer.com/embed.js?2';
const callbacks = [];
let loaded = false;
const isScriptInjected = () => {
    const scripts = document.querySelectorAll('script');
    let injected = false;
    scripts.forEach((script) => {
        if (script.src.includes(scriptUrl)) {
            injected = true;
        }
    });
    return injected;
};
const addCallback = (callback) => {
    callbacks.push(callback);
};
const runCallbacks = () => {
    if (loaded) {
        let callback;
        while ((callback = callbacks.shift())) {
            callback();
        }
    }
};
export const loadScript = (callback) => {
    addCallback(callback);
    if (!isScriptInjected()) {
        const embedScript = document.createElement('script');
        embedScript.setAttribute('src', scriptUrl);
        embedScript.onload = () => {
            loaded = true;
            runCallbacks();
        };
        document.head.appendChild(embedScript);
    }
    else {
        runCallbacks();
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9hZFNjcmlwdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL2VtYWlsLWVkaXRvci9zcmMvbGliL2xvYWRTY3JpcHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxTQUFTLEdBQUcsaUNBQWlDLENBQUM7QUFDcEQsTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDO0FBQ3JCLElBQUksTUFBTSxHQUFHLEtBQUssQ0FBQztBQUVuQixNQUFNLGdCQUFnQixHQUFHLEdBQUcsRUFBRTtJQUM1QixNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDcEQsSUFBSSxRQUFRLEdBQUcsS0FBSyxDQUFDO0lBRXJCLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRTtRQUN6QixJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFO1lBQ2xDLFFBQVEsR0FBRyxJQUFJLENBQUM7U0FDakI7SUFDSCxDQUFDLENBQUMsQ0FBQztJQUVILE9BQU8sUUFBUSxDQUFDO0FBQ2xCLENBQUMsQ0FBQztBQUVGLE1BQU0sV0FBVyxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUU7SUFDL0IsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMzQixDQUFDLENBQUM7QUFFRixNQUFNLFlBQVksR0FBRyxHQUFHLEVBQUU7SUFDeEIsSUFBSSxNQUFNLEVBQUU7UUFDVixJQUFJLFFBQVEsQ0FBQztRQUViLE9BQU8sQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUU7WUFDckMsUUFBUSxFQUFFLENBQUM7U0FDWjtLQUNGO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUU7SUFDckMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBRXRCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFO1FBQ3ZCLE1BQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDckQsV0FBVyxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDM0MsV0FBVyxDQUFDLE1BQU0sR0FBRyxHQUFHLEVBQUU7WUFDeEIsTUFBTSxHQUFHLElBQUksQ0FBQztZQUNkLFlBQVksRUFBRSxDQUFDO1FBQ2pCLENBQUMsQ0FBQztRQUNGLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0tBQ3hDO1NBQU07UUFDTCxZQUFZLEVBQUUsQ0FBQztLQUNoQjtBQUNILENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNjcmlwdFVybCA9ICcvL2VkaXRvci51bmxheWVyLmNvbS9lbWJlZC5qcz8yJztcclxuY29uc3QgY2FsbGJhY2tzID0gW107XHJcbmxldCBsb2FkZWQgPSBmYWxzZTtcclxuXHJcbmNvbnN0IGlzU2NyaXB0SW5qZWN0ZWQgPSAoKSA9PiB7XHJcbiAgY29uc3Qgc2NyaXB0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NjcmlwdCcpO1xyXG4gIGxldCBpbmplY3RlZCA9IGZhbHNlO1xyXG5cclxuICBzY3JpcHRzLmZvckVhY2goKHNjcmlwdCkgPT4ge1xyXG4gICAgaWYgKHNjcmlwdC5zcmMuaW5jbHVkZXMoc2NyaXB0VXJsKSkge1xyXG4gICAgICBpbmplY3RlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBpbmplY3RlZDtcclxufTtcclxuXHJcbmNvbnN0IGFkZENhbGxiYWNrID0gKGNhbGxiYWNrKSA9PiB7XHJcbiAgY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG59O1xyXG5cclxuY29uc3QgcnVuQ2FsbGJhY2tzID0gKCkgPT4ge1xyXG4gIGlmIChsb2FkZWQpIHtcclxuICAgIGxldCBjYWxsYmFjaztcclxuXHJcbiAgICB3aGlsZSAoKGNhbGxiYWNrID0gY2FsbGJhY2tzLnNoaWZ0KCkpKSB7XHJcbiAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGxvYWRTY3JpcHQgPSAoY2FsbGJhY2spID0+IHtcclxuICBhZGRDYWxsYmFjayhjYWxsYmFjayk7XHJcblxyXG4gIGlmICghaXNTY3JpcHRJbmplY3RlZCgpKSB7XHJcbiAgICBjb25zdCBlbWJlZFNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgZW1iZWRTY3JpcHQuc2V0QXR0cmlidXRlKCdzcmMnLCBzY3JpcHRVcmwpO1xyXG4gICAgZW1iZWRTY3JpcHQub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICBsb2FkZWQgPSB0cnVlO1xyXG4gICAgICBydW5DYWxsYmFja3MoKTtcclxuICAgIH07XHJcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGVtYmVkU2NyaXB0KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcnVuQ2FsbGJhY2tzKCk7XHJcbiAgfVxyXG59O1xyXG4iXX0=